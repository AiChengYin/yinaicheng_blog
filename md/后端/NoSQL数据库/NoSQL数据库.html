<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NoSQL数据库 | 印爱成的IT技术分享</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/yinaicheng_blog/myWebStie.ico">
    <script charset="utf-8" async="async" src="/yinaicheng_blog/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/yinaicheng_blog/js/global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="算法、并发编程、分布式、中间件、关系型数据库、云原生...">
    <meta name="robots" content="all">
    <meta name="author" content="印爱成">
    <meta name="title" content="IT技术分享">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="keywords" content="算法、并发编程、分布式、中间件、关系型数据库、云原生...">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/yinaicheng_blog/assets/css/0.styles.1a44adbb.css" as="style"><link rel="preload" href="/yinaicheng_blog/assets/js/app.0271d8dc.js" as="script"><link rel="preload" href="/yinaicheng_blog/assets/js/4.1a89b17a.js" as="script"><link rel="preload" href="/yinaicheng_blog/assets/js/126.a0618c3d.js" as="script"><link rel="preload" href="/yinaicheng_blog/assets/js/1.d469b037.js" as="script"><link rel="prefetch" href="/yinaicheng_blog/assets/js/100.c00abdc0.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/101.83bba6e3.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/102.2b20bbad.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/103.c3b68e85.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/104.d67dbb2a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/105.cbf96416.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/106.ad54ab3a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/107.8cd3ff41.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/108.8086c06a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/109.d0c4d834.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/11.978d1e2a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/110.e2ccea0b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/111.456708f1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/112.3c77d366.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/113.9a278f17.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/114.c5000519.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/115.87631933.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/116.84226962.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/117.c65e8577.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/118.2a19814c.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/119.23bbc74f.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/12.16794439.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/120.f93beed6.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/121.ba2efdca.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/122.f6779a11.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/123.de4034ce.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/124.13fb3ff7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/125.b4f7a00d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/127.670c4d1d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/128.a528d2ac.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/129.cfc8273a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/13.b7e8a774.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/130.2f187ad7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/131.ff51af93.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/132.c371fc0c.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/133.3420d5a1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/134.bb50c64d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/135.88205c55.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/136.0fe4d36e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/137.68e344ca.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/138.c373a7d3.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/139.865dbc57.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/14.7995e4ee.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/140.f9c94f58.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/141.f75f617c.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/142.c6452c52.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/143.31d2d369.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/144.8f418834.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/145.d8a14a12.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/146.e0d5c010.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/147.2bd4ac8f.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/148.80c7f20a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/149.ace5e226.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/15.b49ec928.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/150.847a6359.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/151.8c09e9a1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/152.3ce4e092.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/153.2a1c96bd.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/154.8919cf62.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/155.ef00577f.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/156.64a8e8aa.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/157.07505965.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/158.6b0b264e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/159.73bc9665.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/16.44dd1061.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/160.155117bd.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/161.39b9d011.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/162.ccef2972.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/163.6e6c08ee.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/164.2c80986d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/17.2931e0fd.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/18.9ba50385.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/19.5e64800a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/2.8a64ebe1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/20.b1b11c6e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/21.b4c51c47.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/22.956fd5e6.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/23.58a793d7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/24.ecce2bd1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/25.43efdb6a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/26.f95bd496.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/27.805cffd4.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/28.142a9f93.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/29.d290a4c0.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/3.94b3b97e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/30.f200a059.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/31.a5b51d4d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/32.4b00f4e8.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/33.fcf3a60e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/34.89b6df5f.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/35.818c63c7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/36.74099528.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/37.85ec9b4d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/38.35670582.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/39.0565605b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/40.39b2cdad.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/41.41115a85.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/42.63cbb050.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/43.38eebdfb.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/44.cf98a155.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/45.e77b4d0b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/46.83d21442.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/47.eaf5ded7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/48.73e5a88e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/49.db1102c4.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/5.b18bb4f2.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/50.4a07f046.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/51.b90d15ed.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/52.4467ded3.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/53.a43f3e9b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/54.4a6c8fae.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/55.5e61fd0e.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/56.ebb5e351.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/57.aad3b563.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/58.b9da3cd4.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/59.84f1c485.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/6.92cb0306.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/60.42cf3c0b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/61.ad84e49d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/62.c1ed9a04.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/63.4c9614b2.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/64.387a8ba6.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/65.a18c74c0.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/66.0d549ada.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/67.d0ae434a.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/68.dedc40cc.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/69.8e375823.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/7.ab5c9d8c.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/70.b4296e81.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/71.965b8ee0.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/72.f1dc2e9f.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/73.db10919c.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/74.60dcd4e1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/75.9e6c87f0.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/76.88563296.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/77.44d7e72c.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/78.b5139a47.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/79.fe692f57.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/8.2a6ce4c2.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/80.6189a5a6.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/81.9a99aff7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/82.09afc955.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/83.cfc9cdfb.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/84.7a69c739.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/85.cc0b6f09.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/86.dad9e15b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/87.8013cf2d.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/88.e6e3124b.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/89.42bdbf46.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/90.f4dab386.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/91.805eeec7.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/92.22ccee98.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/93.e299f773.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/94.9cb80189.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/95.f5b82db9.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/96.7b996895.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/97.33b7dae1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/98.4d943d9f.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/99.aae995d1.js"><link rel="prefetch" href="/yinaicheng_blog/assets/js/vendors~docsearch.2e30a18f.js">
    <link rel="stylesheet" href="/yinaicheng_blog/assets/css/0.styles.1a44adbb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yinaicheng_blog/" class="home-link router-link-active"><!----> <span class="site-name">印爱成的IT技术分享</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法与数据结构" class="dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/算法与数据结构/算法/1.算法概述.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/算法与数据结构/数据结构/1.数据结构概述.html" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式消息中间件" class="dropdown-title"><span class="title">分布式消息中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/分布式消息中间件/ActiveMQ/1.JMS概述.html" class="nav-link">
  ActiveMQ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="负载均衡中间件" class="dropdown-title"><span class="title">负载均衡中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/负载均衡中间件/Nginx/1.Nginx负载均衡.html" class="nav-link">
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式文件存储" class="dropdown-title"><span class="title">分布式文件存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/分布式文件存储/MinIO/1.介绍.html" class="nav-link">
  MinIO
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关系型数据库" class="dropdown-title"><span class="title">关系型数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/关系型数据库/Mysql/1.MySQL简介.html" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="多线程并发编程" class="dropdown-title"><span class="title">多线程并发编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/多线程并发编程/Java基础/1.Java程序运行原理分析.html" class="nav-link">
  Java基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高并发网络编程" class="dropdown-title"><span class="title">高并发网络编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/高并发网络编程/Java网络编程/1.TCP_UDP协议.html" class="nav-link">
  Java网络编程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/框架/Spring框架/Spring介绍.html" class="nav-link">
  Spring
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码版本控制" class="dropdown-title"><span class="title">代码版本控制</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/代码版本控制/Git/1.Git版本控制入门.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/代码版本控制/JitPack/JitPack.html" class="nav-link">
  JitPack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/准备工作/使用nvm管理不同版本的 node与npm.html" class="nav-link">
  准备工作
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/前后端分离与工程化/前后端分离与工程化.html" class="nav-link">
  前后端分离与工程化
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/前端性能优化/前端性能优化.html" class="nav-link">
  前端性能优化
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/基础前端技术/基础前端技术.html" class="nav-link">
  基础前端技术
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/框架和工具/框架和工具.html" class="nav-link">
  框架和工具
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/浏览器兼容性与安全性/浏览器兼容性与安全性.html" class="nav-link">
  浏览器兼容性与安全性
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/Java开发经验/Java开发经验.html" class="nav-link">
  Java开发经验
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/框架和工具链/框架和工具链.html" class="nav-link">
  框架和工具链
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/关系型数据库/关系型数据库.html" class="nav-link">
  关系型数据库
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/NoSQL数据库/NoSQL数据库.html" class="nav-link">
  NoSQL数据库
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/RESTful的API/RESTful的API.html" class="nav-link">
  RESTful的API
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/分布式系统及微服务架构/分布式系统及微服务架构.html" class="nav-link">
  分布式系统及微服务架构
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/消息队列系统/消息队列系统.html" class="nav-link">
  消息队列系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><span class="title">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/面试/华为/机考/注意事项.html" class="nav-link">
  华为
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/Linux/Centos/常用操作/常用操作.html" class="nav-link">
  Centos
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/Linux/Ubuntu/常用操作/常用操作.html" class="nav-link">
  Ubuntu
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><span class="title">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/AI/ChatGPT/ChatGPT使用.html" class="nav-link">
  ChatGPT
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="外语" class="dropdown-title"><span class="title">外语</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/外语/日语/新标日初级/1.第一课.html" class="nav-link">
  新标日初级
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/外语/日语/日语学习语法全掌握/1.名词谓语句.html" class="nav-link">
  日语学习语法全掌握
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/外语/日语/TRYN2语法必备/1.名词+につき.html" class="nav-link">
  TRYN2语法必备
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="プロジェクト紹介" class="dropdown-title"><span class="title">プロジェクト紹介</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/プロジェクト紹介/上海咪啰信息科技有限公司/1.洋⼭四期⼤数据運営効率分析システム.html" class="nav-link">
  上海咪啰信息科技有限公司
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/プロジェクト紹介/⽹易（杭州）⽹络有限公司/1.⽹易数帆（クラウド公共プラットフォーム）CMS∕ミニアプリ開発.html" class="nav-link">
  ⽹易（杭州）⽹络有限公司
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法与数据结构" class="dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/算法与数据结构/算法/1.算法概述.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/算法与数据结构/数据结构/1.数据结构概述.html" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式消息中间件" class="dropdown-title"><span class="title">分布式消息中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/分布式消息中间件/ActiveMQ/1.JMS概述.html" class="nav-link">
  ActiveMQ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="负载均衡中间件" class="dropdown-title"><span class="title">负载均衡中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/负载均衡中间件/Nginx/1.Nginx负载均衡.html" class="nav-link">
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式文件存储" class="dropdown-title"><span class="title">分布式文件存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/分布式文件存储/MinIO/1.介绍.html" class="nav-link">
  MinIO
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关系型数据库" class="dropdown-title"><span class="title">关系型数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/关系型数据库/Mysql/1.MySQL简介.html" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="多线程并发编程" class="dropdown-title"><span class="title">多线程并发编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/多线程并发编程/Java基础/1.Java程序运行原理分析.html" class="nav-link">
  Java基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高并发网络编程" class="dropdown-title"><span class="title">高并发网络编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/高并发网络编程/Java网络编程/1.TCP_UDP协议.html" class="nav-link">
  Java网络编程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/框架/Spring框架/Spring介绍.html" class="nav-link">
  Spring
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码版本控制" class="dropdown-title"><span class="title">代码版本控制</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/代码版本控制/Git/1.Git版本控制入门.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/代码版本控制/JitPack/JitPack.html" class="nav-link">
  JitPack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/准备工作/使用nvm管理不同版本的 node与npm.html" class="nav-link">
  准备工作
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/前后端分离与工程化/前后端分离与工程化.html" class="nav-link">
  前后端分离与工程化
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/前端性能优化/前端性能优化.html" class="nav-link">
  前端性能优化
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/基础前端技术/基础前端技术.html" class="nav-link">
  基础前端技术
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/框架和工具/框架和工具.html" class="nav-link">
  框架和工具
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/前端/浏览器兼容性与安全性/浏览器兼容性与安全性.html" class="nav-link">
  浏览器兼容性与安全性
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/Java开发经验/Java开发经验.html" class="nav-link">
  Java开发经验
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/框架和工具链/框架和工具链.html" class="nav-link">
  框架和工具链
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/关系型数据库/关系型数据库.html" class="nav-link">
  关系型数据库
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/NoSQL数据库/NoSQL数据库.html" class="nav-link">
  NoSQL数据库
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/RESTful的API/RESTful的API.html" class="nav-link">
  RESTful的API
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/分布式系统及微服务架构/分布式系统及微服务架构.html" class="nav-link">
  分布式系统及微服务架构
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/后端/消息队列系统/消息队列系统.html" class="nav-link">
  消息队列系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><span class="title">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/面试/华为/机考/注意事项.html" class="nav-link">
  华为
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/Linux/Centos/常用操作/常用操作.html" class="nav-link">
  Centos
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/Linux/Ubuntu/常用操作/常用操作.html" class="nav-link">
  Ubuntu
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><span class="title">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/AI/ChatGPT/ChatGPT使用.html" class="nav-link">
  ChatGPT
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="外语" class="dropdown-title"><span class="title">外语</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/外语/日语/新标日初级/1.第一课.html" class="nav-link">
  新标日初级
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/外语/日语/日语学习语法全掌握/1.名词谓语句.html" class="nav-link">
  日语学习语法全掌握
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/外语/日语/TRYN2语法必备/1.名词+につき.html" class="nav-link">
  TRYN2语法必备
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="プロジェクト紹介" class="dropdown-title"><span class="title">プロジェクト紹介</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/プロジェクト紹介/上海咪啰信息科技有限公司/1.洋⼭四期⼤数据運営効率分析システム.html" class="nav-link">
  上海咪啰信息科技有限公司
</a></li><li class="dropdown-item"><!----> <a href="/yinaicheng_blog/md/プロジェクト紹介/⽹易（杭州）⽹络有限公司/1.⽹易数帆（クラウド公共プラットフォーム）CMS∕ミニアプリ開発.html" class="nav-link">
  ⽹易（杭州）⽹络有限公司
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java开发经验</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/Java开发经验/Java开发经验.html" class="sidebar-link">Java开发经验</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>NoSQL数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/NoSQL数据库/NoSQL数据库.html" class="active sidebar-link">NoSQL数据库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>关系型数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/关系型数据库/关系型数据库.html" class="sidebar-link">关系型数据库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架和工具链</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/框架和工具链/框架和工具链.html" class="sidebar-link">框架和工具链</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RESTful的API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/RESTful的API/RESTful的API.html" class="sidebar-link">RESTful API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RESTful的API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/RESTful的API/RESTful的API.html" class="sidebar-link">RESTful API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式系统及微服务架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/分布式系统及微服务架构/分布式系统及微服务架构.html" class="sidebar-link">分布式系统及微服务架构</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>消息队列系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yinaicheng_blog/md/后端/消息队列系统/消息队列系统.html" class="sidebar-link">消息队列系统</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="nosql数据库"><a href="#nosql数据库" class="header-anchor">#</a> NoSQL数据库</h1> <h2 id="mongodb-文档模型设计、索引、聚合查询"><a href="#mongodb-文档模型设计、索引、聚合查询" class="header-anchor">#</a> MongoDB：文档模型设计、索引、聚合查询</h2> <p>MongoDB：文档模型设计、索引、聚合查询</p> <p>MongoDB 作为 NoSQL 数据库的代表，因其灵活的文档模型、强大的扩展性和高效的查询能力，广泛应用于现代应用开发中。在高级后端开发中，合理设计 MongoDB 的文档模型、索引策略及聚合查询至关重要。这不仅可以提高查询性能，还能保障系统在面对复杂业务逻辑时的高效运行。</p> <h3 id="_1-文档模型设计"><a href="#_1-文档模型设计" class="header-anchor">#</a> 1. 文档模型设计</h3> <h4 id="原则"><a href="#原则" class="header-anchor">#</a> 原则：</h4> <p>MongoDB 的文档存储模型基于 BSON（类似于 JSON），这种灵活的模式使得它特别适用于非结构化或半结构化数据。然而，在设计文档模型时需要平衡数据冗余和查询效率，选择嵌入（Embedding）或引用（Referencing）两种设计模式。</p> <h4 id="设计策略"><a href="#设计策略" class="header-anchor">#</a> 设计策略：</h4> <ul><li><p><strong>嵌入模式（Embedding）</strong>：将关联数据嵌入到文档内部，用于频繁访问的关联数据。这种模式避免了关联查询（JOIN）操作，提升了读性能，适用于一对一或一对多（关系较为紧密）的场景。</p> <ul><li><strong>适用场景</strong>：例如用户的地址信息可以嵌入用户文档中，因为地址信息是访问用户数据时经常需要的一部分。</li> <li><strong>优点</strong>：提高读操作性能，避免外部查询和复杂的聚合操作。</li> <li><strong>缺点</strong>：当嵌入的数据量过大时，文档尺寸会超过 MongoDB 的 BSON 限制（16MB），不适用于数据频繁变化的场景。</li></ul></li> <li><p><strong>引用模式（Referencing）</strong>：通过引用其他集合中的 ObjectId 进行关联，适用于关系相对松散且数据冗余较高的场景。虽然需要通过额外查询获得关联数据，但能够降低文档大小和数据冗余。</p> <ul><li><strong>适用场景</strong>：例如，订单和用户数据分开存储，通过引用实现关联。</li> <li><strong>优点</strong>：减少冗余，控制文档大小，适合大型复杂数据模型。</li> <li><strong>缺点</strong>：增加了查询复杂度和查询延迟，尤其是在需要进行跨集合查询时。</li></ul></li> <li><p><strong>混合模式</strong>：某些场景下，可能需要同时使用嵌入和引用，以兼顾性能和灵活性。例如，将数据量较小且频繁访问的数据嵌入，将变更频繁或关系复杂的数据引用。</p></li></ul> <h3 id="_2-索引优化"><a href="#_2-索引优化" class="header-anchor">#</a> 2. 索引优化</h3> <h4 id="原则-2"><a href="#原则-2" class="header-anchor">#</a> 原则：</h4> <p>索引是 MongoDB 提升查询性能的关键工具，但索引的设计必须合理，否则会导致写操作性能下降或占用过多存储空间。高级后端工程师在使用 MongoDB 时需要深刻理解索引的原理，以平衡读写性能。</p> <h4 id="索引策略"><a href="#索引策略" class="header-anchor">#</a> 索引策略：</h4> <ul><li><p><strong>单字段索引（Single Field Index）</strong>：最常见的索引类型，用于优化单个字段的查询。例如在用户集合中对 <code>username</code> 字段建立索引，用于加速按用户名查询的性能。</p> <ul><li><strong>适用场景</strong>：简单的精确匹配或范围查询，如<code>find({age: 25})</code>。</li></ul></li> <li><p><strong>复合索引（Compound Index）</strong>：针对多个字段建立的索引，用于加速复杂的查询。例如，在订单集合中，可能需要对 <code>userId</code> 和 <code>createdAt</code> 同时进行查询。在这种情况下，复合索引能够加速基于多字段的过滤条件。</p> <ul><li><strong>示例</strong>：<code>db.orders.createIndex({ userId: 1, createdAt: -1 })</code> 可以优化按用户和时间排序的查询。</li></ul></li> <li><p><strong>唯一索引（Unique Index）</strong>：确保索引字段的唯一性，通常用于具有唯一约束的业务场景（如电子邮件或用户名）。通过唯一索引，可以在数据库层面保障数据的一致性。</p></li> <li><p><strong>全文索引（Text Index）</strong>：用于加速文本内容的检索，适用于需要对文档中的文本进行模糊搜索的场景。</p></li> <li><p><strong>TTL 索引</strong>：基于时间的索引，用于自动清理过期数据。例如，可以对会话数据设置 TTL 索引，在指定时间后自动删除过期的会话文档。</p></li></ul> <h4 id="索引优化的注意事项"><a href="#索引优化的注意事项" class="header-anchor">#</a> 索引优化的注意事项：</h4> <ul><li><strong>写操作开销</strong>：每次插入或更新操作时，索引也会同步更新。因此，过多的索引可能导致写性能下降。通常建议在读写负载平衡的前提下选择性地添加必要的索引。</li> <li><strong>覆盖索引（Covered Query）</strong>：通过建立包含查询条件和返回字段的复合索引，可以实现“覆盖索引”，避免文档的额外查找过程，进一步提高查询效率。</li></ul> <h3 id="_3-聚合查询-aggregation-framework"><a href="#_3-聚合查询-aggregation-framework" class="header-anchor">#</a> 3. 聚合查询（Aggregation Framework）</h3> <h4 id="原则-3"><a href="#原则-3" class="header-anchor">#</a> 原则：</h4> <p>MongoDB 的聚合框架提供了强大的数据处理能力，类似于 SQL 中的 <code>GROUP BY</code>、<code>HAVING</code> 和 <code>ORDER BY</code> 等操作。聚合查询不仅可以进行复杂的数据处理，还能执行数据的过滤、分组、排序、联表查询等操作，是处理大数据量时的利器。</p> <h4 id="聚合操作的核心阶段"><a href="#聚合操作的核心阶段" class="header-anchor">#</a> 聚合操作的核心阶段：</h4> <ul><li><p>**match**：用于过滤文档，相当于 SQL 中的 `WHERE`。将 `match` 尽量放在聚合管道的开头，以减少数据处理量。</p> <ul><li><strong>示例</strong>：<code>db.orders.aggregate([ { $match: { status: 'completed' } } ])</code>，筛选出已完成的订单。</li></ul></li> <li><p>**group**：用于对文档进行分组并计算聚合值，类似于 SQL 中的 `GROUP BY`。通过指定 `_id` 字段进行分组，并使用聚合操作符（如 `sum<code>、</code>$avg`）计算统计值。</p> <ul><li><strong>示例</strong>：<code>db.orders.aggregate([ { $group: { _id: &quot;$userId&quot;, total: { $sum: &quot;$amount&quot; } } } ])</code>，统计每个用户的订单总金额。</li></ul></li> <li><p><strong>$project</strong>：用于控制输出文档的结构，可以通过计算字段、重命名字段等操作来调整结果集的内容。</p> <ul><li><strong>示例</strong>：<code>db.orders.aggregate([ { $project: { _id: 0, orderId: 1, totalAmount: &quot;$amount&quot; } } ])</code>，调整输出字段为订单ID和总金额。</li></ul></li> <li><p><strong>$sort</strong>：用于对文档排序，类似于 SQL 中的 <code>ORDER BY</code>，排序字段需要有索引支持，否则可能导致查询性能下降。</p></li> <li><p>**lookup**：用于在聚合查询中实现关联查询（类似于 SQL 的 JOIN）。MongoDB 通过 `lookup` 在管道中实现不同集合的文档关联，但要注意关联查询的性能开销，尤其在大数据量场景下。</p></li></ul> <h4 id="聚合查询优化策略"><a href="#聚合查询优化策略" class="header-anchor">#</a> 聚合查询优化策略：</h4> <ul><li><strong>使用索引</strong>：在聚合操作前尽可能通过 <code>$match</code> 过滤数据，并确保过滤条件字段上有合适的索引。</li> <li><strong>避免过长的管道</strong>：聚合管道中的步骤不宜过多，否则会增加查询的复杂度和内存占用。建议将复杂的业务逻辑拆分成多次聚合查询或分布式处理。</li> <li><strong>使用 <code>$facet</code> 并行处理</strong>：通过 <code>$facet</code> 可以在一个聚合管道中并行处理多个数据操作，大大提升了复杂查询的性能。</li></ul> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结：</h3> <p>MongoDB 的文档模型设计和查询优化是性能调优的核心。通过合理的模型设计、索引策略和聚合查询优化，可以最大化 MongoDB 的灵活性和查询性能。高级后端开发工程师应深刻理解业务场景，选择合适的数据存储模型，并结合索引和聚合操作达到最优的性能表现。</p> <h2 id="redis-数据类型、持久化、缓存设计、分布式锁、订阅发布模式"><a href="#redis-数据类型、持久化、缓存设计、分布式锁、订阅发布模式" class="header-anchor">#</a> Redis：数据类型、持久化、缓存设计、分布式锁、订阅发布模式</h2> <p>Redis：数据类型、持久化、缓存设计、分布式锁、订阅发布模式</p> <p>Redis 是一个高性能的内存数据库，广泛应用于缓存、分布式锁、实时数据处理等场景。作为高级后端开发工程师，我们需要深刻理解 Redis 的核心功能及其在高并发场景下的优化应用。Redis 提供了丰富的数据类型、持久化机制、灵活的缓存设计，并且通过分布式锁和发布订阅模式，能够解决诸多分布式系统中的常见问题。</p> <h3 id="_1-redis-数据类型"><a href="#_1-redis-数据类型" class="header-anchor">#</a> 1. Redis 数据类型</h3> <p>Redis 提供了多种数据类型，满足不同业务场景的需求。理解并灵活使用这些数据结构是 Redis 性能优化的关键。</p> <h4 id="主要数据类型"><a href="#主要数据类型" class="header-anchor">#</a> 主要数据类型：</h4> <ul><li><p><strong>String</strong>：Redis 中最基本的数据类型，通常用于存储简单的键值对，如用户信息、计数器等。其读写速度极快，适合用于简单缓存和计数场景。</p> <ul><li><strong>示例</strong>：<code>SET key value</code>，<code>GET key</code>。</li></ul></li> <li><p><strong>Hash</strong>：用于存储多个字段和值的集合，类似于 JSON 对象。适合用于存储结构化数据，如用户信息、商品详情等。</p> <ul><li><strong>示例</strong>：<code>HSET user:1001 name &quot;John&quot; age 30</code>，<code>HGET user:1001 name</code>。</li></ul></li> <li><p><strong>List</strong>：链表结构，支持从两端进行快速插入和删除，适用于实现消息队列或任务列表等场景。</p> <ul><li><strong>示例</strong>：<code>LPUSH tasks &quot;task1&quot;</code>，<code>RPOP tasks</code>。</li></ul></li> <li><p><strong>Set</strong>：无序集合，支持去重和集合运算，适用于存储无重复元素的数据，如标签系统、用户关注列表等。</p> <ul><li><strong>示例</strong>：<code>SADD tags &quot;Java&quot;</code>，<code>SISMEMBER tags &quot;Java&quot;</code>。</li></ul></li> <li><p><strong>Sorted Set（ZSet）</strong>：带有分数的有序集合，常用于排行榜、带权重的任务调度等场景。</p> <ul><li><strong>示例</strong>：<code>ZADD leaderboard 100 &quot;player1&quot;</code>，<code>ZRANGE leaderboard 0 10</code>。</li></ul></li> <li><p><strong>Bitmap</strong> 和 <strong>HyperLogLog</strong>：用于存储海量数据，如统计用户活跃天数或快速统计唯一访客数。这些结构对于需要高效处理海量数据的场景非常有效。</p></li></ul> <h3 id="_2-持久化策略"><a href="#_2-持久化策略" class="header-anchor">#</a> 2. 持久化策略</h3> <p>Redis 是内存数据库，但为了防止数据丢失，提供了多种持久化方式。理解和选择合适的持久化策略可以在数据一致性和性能之间找到平衡。</p> <h4 id="主要持久化机制"><a href="#主要持久化机制" class="header-anchor">#</a> 主要持久化机制：</h4> <ul><li><p><strong>RDB（Redis Database Backup）</strong>：定期将数据快照存储到磁盘。RDB 提供高效的快照存储方式，但可能导致数据丢失（取决于备份的频率）。</p> <ul><li><strong>适用场景</strong>：适用于数据写入量较小、允许有少量数据丢失的场景，或用于定期备份。</li></ul></li> <li><p><strong>AOF（Append Only File）</strong>：通过将每次写操作追加到日志文件，实现更高的数据持久性。相比 RDB，AOF 提供更好的数据恢复能力，但相对占用更多的磁盘空间。</p> <ul><li><strong>适用场景</strong>：需要高数据持久性、不能容忍数据丢失的场景。通过设置同步策略（如每秒同步、每操作同步）来平衡性能与持久化要求。</li></ul></li> <li><p><strong>混合模式</strong>：Redis 6.0 之后引入了 RDB 和 AOF 的混合持久化模式，以提升数据恢复速度，同时减少磁盘空间消耗。</p></li></ul> <h3 id="_3-缓存设计"><a href="#_3-缓存设计" class="header-anchor">#</a> 3. 缓存设计</h3> <p>Redis 最常见的应用场景是缓存系统，合理的缓存设计可以极大地提高系统的吞吐量和响应速度。</p> <h4 id="缓存策略"><a href="#缓存策略" class="header-anchor">#</a> 缓存策略：</h4> <ul><li><p><strong>缓存穿透</strong>：当大量不存在的键查询到数据库时，可能造成数据库负载过高。解决方案是为每个不存在的键设置一个短期缓存。</p> <ul><li><strong>优化方法</strong>：可以为无效查询结果缓存空值，如 <code>SET key &quot;&quot; EX 60</code>，避免频繁查询数据库。</li></ul></li> <li><p><strong>缓存雪崩</strong>：如果大量缓存同时过期，可能会导致瞬时高负载。为防止缓存雪崩，建议在设置过期时间时添加随机值。</p> <ul><li><strong>优化方法</strong>：使用 <code>SET key value EX &lt;random time&gt;</code>，或采用双缓存机制，确保旧缓存仍可用时开始更新新缓存。</li></ul></li> <li><p><strong>缓存击穿</strong>：当热点数据失效时，大量请求同时访问数据库。为应对这一问题，可以使用“互斥锁”控制缓存的重建过程。</p> <ul><li><strong>优化方法</strong>：在缓存失效时，使用 Redis 的 <code>SETNX</code> 创建一个锁，防止多个线程同时重建缓存。</li></ul></li></ul> <h4 id="缓存淘汰策略"><a href="#缓存淘汰策略" class="header-anchor">#</a> 缓存淘汰策略：</h4> <p>Redis 提供了多种缓存淘汰策略，用于控制内存使用：</p> <ul><li><strong>LRU（Least Recently Used）</strong>：淘汰最久未使用的缓存。</li> <li><strong>LFU（Least Frequently Used）</strong>：淘汰访问频率最低的缓存。</li> <li><strong>TTL（Time To Live）</strong>：根据设定的过期时间淘汰。</li></ul> <p>高级缓存设计还需要考虑如何与业务逻辑结合，例如缓存预热、分布式缓存等。</p> <h3 id="_4-分布式锁"><a href="#_4-分布式锁" class="header-anchor">#</a> 4. 分布式锁</h3> <p>在分布式系统中，确保多节点操作的顺序性和一致性，分布式锁是常用的技术方案。Redis 提供了简单且高效的分布式锁机制。</p> <h4 id="redis-分布式锁的实现"><a href="#redis-分布式锁的实现" class="header-anchor">#</a> Redis 分布式锁的实现：</h4> <ul><li><strong>SET NX EX</strong>：通过 Redis 的 <code>SETNX</code> 命令，可以确保锁的唯一性，同时通过 <code>EX</code> 设置过期时间，防止死锁。
<ul><li><strong>示例</strong>：<code>SET lock:order_1001 &quot;1&quot; NX EX 30</code>，设置订单处理的分布式锁，过期时间为 30 秒。</li></ul></li></ul> <h4 id="高级锁机制"><a href="#高级锁机制" class="header-anchor">#</a> 高级锁机制：</h4> <ul><li><p><strong>Redlock 算法</strong>：适用于 Redis 集群的分布式锁实现。Redlock 算法通过在多个 Redis 实例上获取锁，确保分布式环境下的强一致性。</p> <ul><li><strong>应用场景</strong>：如分布式订单系统中防止重复订单处理或并发库存更新。</li></ul></li> <li><p><strong>锁续期与解锁保障</strong>：在长时间任务中，需要通过“锁续期”确保任务未完成时锁不会过期。使用 Redis 的 Lua 脚本可以保证获取和释放锁的原子性，避免并发问题。</p></li></ul> <h3 id="_5-订阅发布模式-pub-sub"><a href="#_5-订阅发布模式-pub-sub" class="header-anchor">#</a> 5. 订阅发布模式（Pub/Sub）</h3> <p>Redis 的订阅发布功能非常适合实时消息系统或事件驱动的场景。通过 Pub/Sub，可以实现不同节点之间的高效通信。</p> <h4 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> 使用场景：</h4> <ul><li><p><strong>实时通知</strong>：通过发布订阅机制，可以实现实时的事件通知。例如，订单状态更新可以通过 Redis 的 Pub/Sub 通知到前端或其他服务。</p></li> <li><p><strong>多服务通信</strong>：在微服务架构中，多个服务可以通过 Redis 的发布订阅实现无状态的事件传递，减少直接服务之间的依赖性。</p></li></ul> <h4 id="限制和优化"><a href="#限制和优化" class="header-anchor">#</a> 限制和优化：</h4> <ul><li><p><strong>消息丢失</strong>：Redis 的 Pub/Sub 不会持久化消息，因此如果订阅者未在线，可能会错过消息。对于需要消息持久化的场景，可以选择 Redis Streams 或使用消息队列如 Kafka。</p></li> <li><p><strong>水平扩展</strong>：Pub/Sub 在高并发或跨节点通信时，可能存在性能瓶颈。为提升扩展性，可以考虑结合 Redis Cluster 或者通过 Redis Streams 实现更强大的消息处理能力。</p></li></ul> <h3 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结：</h3> <p>Redis 作为一个强大的内存数据库，提供了丰富的数据类型和功能模块，适合多种复杂场景的需求。作为高级后端开发工程师，我们不仅需要掌握 Redis 的基础功能，还要结合业务需求，合理设计缓存方案、分布式锁、持久化策略，以及高效利用 Redis 的发布订阅机制，实现系统的高可用性和高性能。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/yinaicheng_blog/md/后端/Java开发经验/Java开发经验.html" class="prev">
          Java开发经验
        </a></span> <span class="next"><a href="/yinaicheng_blog/md/后端/关系型数据库/关系型数据库.html">
          关系型数据库
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">NoSQL数据库</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#mongodb-文档模型设计、索引、聚合查询" class="toc-sidebar-link">MongoDB：文档模型设计、索引、聚合查询</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_1-文档模型设计" class="toc-sidebar-link">1. 文档模型设计</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_2-索引优化" class="toc-sidebar-link">2. 索引优化</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_3-聚合查询-aggregation-framework" class="toc-sidebar-link">3. 聚合查询（Aggregation Framework）</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#总结" class="toc-sidebar-link">总结：</a></li></ul></li><li><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#redis-数据类型、持久化、缓存设计、分布式锁、订阅发布模式" class="toc-sidebar-link">Redis：数据类型、持久化、缓存设计、分布式锁、订阅发布模式</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_1-redis-数据类型" class="toc-sidebar-link">1. Redis 数据类型</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_2-持久化策略" class="toc-sidebar-link">2. 持久化策略</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_3-缓存设计" class="toc-sidebar-link">3. 缓存设计</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_4-分布式锁" class="toc-sidebar-link">4. 分布式锁</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_5-订阅发布模式-pub-sub" class="toc-sidebar-link">5. 订阅发布模式（Pub/Sub）</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#总结-2" class="toc-sidebar-link">总结：</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">NoSQL数据库</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#mongodb-文档模型设计、索引、聚合查询" class="toc-sidebar-link">MongoDB：文档模型设计、索引、聚合查询</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_1-文档模型设计" class="toc-sidebar-link">1. 文档模型设计</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_2-索引优化" class="toc-sidebar-link">2. 索引优化</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_3-聚合查询-aggregation-framework" class="toc-sidebar-link">3. 聚合查询（Aggregation Framework）</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#总结" class="toc-sidebar-link">总结：</a></li></ul></li><li><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#redis-数据类型、持久化、缓存设计、分布式锁、订阅发布模式" class="toc-sidebar-link">Redis：数据类型、持久化、缓存设计、分布式锁、订阅发布模式</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_1-redis-数据类型" class="toc-sidebar-link">1. Redis 数据类型</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_2-持久化策略" class="toc-sidebar-link">2. 持久化策略</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_3-缓存设计" class="toc-sidebar-link">3. 缓存设计</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_4-分布式锁" class="toc-sidebar-link">4. 分布式锁</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#_5-订阅发布模式-pub-sub" class="toc-sidebar-link">5. 订阅发布模式（Pub/Sub）</a></li><li class="toc-sidebar-sub-header"><a href="/yinaicheng_blog/md/%E5%90%8E%E7%AB%AF/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#总结-2" class="toc-sidebar-link">总结：</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div title="Java开发经验" class="option-box" style="padding-left:2px;text-align:center;"><a href="/yinaicheng_blog/md/后端/Java开发经验/Java开发经验.html"><img src="/images/system/pre2.png" width="30px" class="nozoom"> <span class="show-txt">上一篇</span></a></div> <div title="关系型数据库" class="option-box" style="padding-left:2px;text-align:center;"><a href="/yinaicheng_blog/md/后端/关系型数据库/关系型数据库.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div>  <!----> </aside></div><div class="global-ui"></div></div>
    <script src="/yinaicheng_blog/assets/js/app.0271d8dc.js" defer></script><script src="/yinaicheng_blog/assets/js/4.1a89b17a.js" defer></script><script src="/yinaicheng_blog/assets/js/126.a0618c3d.js" defer></script><script src="/yinaicheng_blog/assets/js/1.d469b037.js" defer></script>
  </body>
</html>
