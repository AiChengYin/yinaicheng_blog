(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{536:function(s,a,t){"use strict";t.r(a);var r=t(8),n=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"apollo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apollo"}},[s._v("#")]),s._v(" Apollo")]),s._v(" "),a("h2",{attrs:{id:"apollo2-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apollo2-1-0"}},[s._v("#")]),s._v(" apollo2.1.0")]),s._v(" "),a("blockquote",[a("p",[s._v("下载安装包")])]),s._v(" "),a("p",[s._v("wget https://github.com/apolloconfig/apollo/releases/download/v2.1.0/apollo-adminservice-2.1.0-github.zip")]),s._v(" "),a("p",[s._v("wget https://github.com/apolloconfig/apollo/releases/download/v2.1.0/apollo-configservice-2.1.0-github.zip")]),s._v(" "),a("p",[s._v("wget https://github.com/apolloconfig/apollo/releases/download/v2.1.0/apollo-portal-2.1.0-github.zip")]),s._v(" "),a("p",[s._v("wget https://github.com/apolloconfig/apollo/archive/refs/tags/v2.1.0.zip")]),s._v(" "),a("blockquote",[a("p",[s._v("解压缩安装包")])]),s._v(" "),a("p",[s._v("unzip apollo-configservice-2.1.0-github.zip -d apollo-config")]),s._v(" "),a("p",[s._v("unzip apollo-adminservice-2.1.0-github.zip -d apollo-admin")]),s._v(" "),a("p",[s._v("unzip apollo-portal-2.1.0-github.zip -d apollo-portal")]),s._v(" "),a("p",[s._v("unzip apollo-2.1.0.zip")]),s._v(" "),a("blockquote",[a("p",[s._v("导入数据库表")])]),s._v(" "),a("p",[s._v("进入数据库：\nmysql -u root -p ***"),a("br"),s._v("\n导入数据库"),a("br"),s._v("\nsource apolloconfigdb.sql"),a("br"),s._v("\nsource apolloportaldb.sql\n连接数据库：")]),s._v(" "),a("ul",[a("li",[s._v("数据库名：ApolloPortalDB，用户名：ApolloPortalDB，无密码，可后期加")]),s._v(" "),a("li",[s._v("数据库名：ApolloConfigDB，用户名：ApolloConfigDB，无密码，可后期加")])]),s._v(" "),a("blockquote",[a("p",[s._v("修改config 、admin、portal数据库配置")])]),s._v(" "),a("p",[s._v("config目录下application-github.properties文件")]),s._v(" "),a("blockquote",[a("p",[s._v("修改portal配置文件apollo-env.properties")])]),s._v(" "),a("blockquote",[a("p",[s._v("最后依次启动config、admin、portal，完成部署（需要提前配置JDK环境）")])]),s._v(" "),a("p",[s._v("找到/apollo-config/scripts下的startup.sh，启动命令：./startup.sh\n输出")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Tue Mar 14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("13:34:06")]),s._v(" CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("====")]),s._v(" Starting "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("====")]),s._v("\nApplication is running as root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("(")]),s._v("UID "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" This is considered insecure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nStarted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19161")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWaiting for server startup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Tue Mar 14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("13:34:33")]),s._v(" CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(" Server started in "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" seconds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("找到/apollo-admin/scripts下的startup.sh，启动命令：./startup.sh"),a("br"),s._v("\n输出")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Tue Mar 14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("13:34:59")]),s._v(" CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("====")]),s._v(" Starting "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("====")]),s._v("\nApplication is running as root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("(")]),s._v("UID "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" This is considered insecure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nStarted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19654")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWaiting for server startup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Tue Mar 14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("13:35:25")]),s._v(" CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(" Server started in "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" seconds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("找到/apollo-portal/scripts下的startup.sh，启动命令：./startup.sh")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Tue Mar 14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("13:36:55")]),s._v(" CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("====")]),s._v(" Starting "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("====")]),s._v("\nApplication is running as root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("(")]),s._v("UID "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" This is considered insecure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nStarted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20428")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWaiting for server startup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Tue Mar 14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("13:37:16")]),s._v(" CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(" Server started in "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" seconds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("验证 :")])]),s._v(" "),a("p",[s._v("防火墙配置规则，添加8070端口")]),s._v(" "),a("ol",[a("li",[s._v("请求地址：http://对外ip地址:8070")]),s._v(" "),a("li",[s._v("输入用户名：apollo，密码：admin")]),s._v(" "),a("li",[s._v("尝试新建appid及发布信息，无问题则部署成功")])]),s._v(" "),a("h2",{attrs:{id:"apollo0-9-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apollo0-9-1"}},[s._v("#")]),s._v(" apollo0.9.1")]),s._v(" "),a("blockquote",[a("p",[s._v("环境")])]),s._v(" "),a("p",[s._v("JDK: 1.8.0_221"),a("br"),s._v("\nMaven: 3.9.1（开发本地有即可，用于打jar包）"),a("br"),s._v("\nMySQL: 5.7.34（远程可访问即可，用于存储apollo数据）"),a("br"),s._v("\napollo: 0.9.1")]),s._v(" "),a("blockquote",[a("p",[s._v("下载安装包（如果下载速度慢可以本地下载好再上传到服务器中）")])]),s._v(" "),a("p",[s._v("wget https://github.com/ctripcorp/apollo/archive/v0.9.1.tar.gz")]),s._v(" "),a("blockquote",[a("p",[s._v("解压缩")])]),s._v(" "),a("p",[s._v("tar zxvf apollo-0.9.1.tar.gz")]),s._v(" "),a("blockquote",[a("p",[s._v("导入数据库文件")])]),s._v(" "),a("p",[s._v("进入数据库：\nmysql -u root -p ***"),a("br"),s._v("\nuse apolloconfigdb"),a("br"),s._v("\n导入数据库"),a("br"),s._v("\nsource apolloconfigdb.sql")]),s._v(" "),a("p",[s._v("use apolloportaldb\nsource apolloportaldb.sql")]),s._v(" "),a("p",[s._v("连接数据库：")]),s._v(" "),a("ul",[a("li",[s._v("数据库名：apolloconfigdb，用户名：ApolloPortalDB，无密码，可后期加")]),s._v(" "),a("li",[s._v("数据库名：apolloportaldb，用户名：ApolloConfigDB，无密码，可后期加")])]),s._v(" "),a("blockquote",[a("p",[s._v("打包前的配置修改")])]),s._v(" "),a("ul",[a("li",[s._v("修改/data/apollo/apollo-0.9.1/scripts/build.sh，把数据库账号密码修改为我们的密码以及mysql服务器地址。")]),s._v(" "),a("li",[s._v("只保留dev_meta，删除fat_meta、uat_meta、pro_meta的配置"),a("br"),s._v("\ndev_meta=http://localhost:8080"),a("br"),s._v('\nMETA_SERVERS_OPTS="-Ddev_meta=$dev_meta"')])]),s._v(" "),a("p",[s._v("build.bat文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("echo off\n\nrem apollo config db info\nset apollo_config_db_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\nset apollo_config_db_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\nset apollo_config_db_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n\nrem apollo portal db info\nset apollo_portal_db_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\nset apollo_portal_db_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\nset apollo_portal_db_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n\nrem meta server url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" different environments should have different meta server addresses\nset dev_meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:8080"')]),s._v("\n\nset META_SERVERS_OPTS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Ddev_meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("dev_meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\n\nrem "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("===============")]),s._v(" Please do not modify the following content "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("===============")]),s._v(" \nrem go to script directory\ncd "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%~dp0"')]),s._v("\n\ncd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\nrem package config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("service and admin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("service\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== starting to build config-service and admin-service ===="')]),s._v("\n\ncall mvn clean package "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DskipTests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pl apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("configservice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("adminservice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("am "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dapollo_profile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("github "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("apollo_config_db_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("apollo_config_db_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("apollo_config_db_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== building config-service and admin-service finished ===="')]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== starting to build portal ===="')]),s._v("\n\ncall mvn clean package "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DskipTests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pl apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("portal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("am "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dapollo_profile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("apollo_portal_db_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("apollo_portal_db_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("apollo_portal_db_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("META_SERVERS_OPTS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== building portal finished ===="')]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== starting to build client ===="')]),s._v("\n\ncall mvn clean install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DskipTests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pl apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("am "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("META_SERVERS_OPTS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== building client finished ===="')]),s._v("\n\npause\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br")])]),a("p",[s._v("build.sh文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sh\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" apollo config db info\napollo_config_db_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\napollo_config_db_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\napollo_config_db_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" apollo portal db info\napollo_portal_db_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\napollo_portal_db_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\napollo_portal_db_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" meta server url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" different environments should have different meta server addresses\ndev_meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("http://localhost:8080")]),s._v("\n\nMETA_SERVERS_OPTS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Ddev_meta=$dev_meta"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("===============")]),s._v(" Please do not modify the following content "),a("span",{pre:!0,attrs:{class:"token separator comment"}},[s._v("===============")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" go to script directory\ncd "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${0%/*}"')]),s._v("\n\ncd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" package config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("service and admin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("service\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== starting to build config-service and admin-service ===="')]),s._v("\n\nmvn clean package "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DskipTests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pl apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("configservice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("adminservice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("am "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dapollo_profile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("github "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("apollo_config_db_url "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("apollo_config_db_username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("apollo_config_db_password\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== building config-service and admin-service finished ===="')]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== starting to build portal ===="')]),s._v("\n\nmvn clean package "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DskipTests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pl apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("portal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("am "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dapollo_profile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("apollo_portal_db_url "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("apollo_portal_db_username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Dspring_datasource_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("apollo_portal_db_password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("META_SERVERS_OPTS\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== building portal finished ===="')]),s._v("\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== starting to build client ===="')]),s._v("\n\nmvn clean install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("DskipTests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pl apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("am "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("META_SERVERS_OPTS\n\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==== building client finished ===="')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])]),a("p",[s._v("然后执行")]),s._v(" "),a("p",[s._v("linux执行./build.sh或者windows执行./build.bat")]),s._v(" "),a("p",[s._v("该脚本会依次打包apollo-configservice、apollo-adminservice,和apollo-client。")]),s._v(" "),a("blockquote",[a("p",[s._v("启动")])]),s._v(" "),a("p",[s._v("如果是本地打包需要上传apollo-adminservice-0.9.1-SNAPSHOT-github.zip、apollo-configservice-0.9.1-SNAPSHOT-github.zip、apollo-portal-0.9.1-SNAPSHOT-github.zip到服务器")]),s._v(" "),a("ul",[a("li",[s._v("apollo-configservice")])]),s._v(" "),a("p",[s._v("切换到目录/apollo-0.9.1/apollo-configservice/target，解压apollo-configservice-0.9.1-SNAPSHOT-github.zip")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("unzip apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("configservice"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9.1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SNAPSHOT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后执行")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("cd scripts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nsudo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("iu cloud\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("./startup.sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("apollo-adminservice")])]),s._v(" "),a("p",[s._v("切换到目录 /data/apollo/apollo-0.9.1/apollo-adminservice/target，解压apollo-adminservice-0.9.1-SNAPSHOT-github.zip")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("unzip apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("adminservice"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9.1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SNAPSHOT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后执行")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("cd scripts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nsudo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("iu cloud\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("./startup.sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("apollo-portal")])]),s._v(" "),a("p",[s._v("apollo-portal的默认端口是8080，和apollo-configservice一致，所以如果需要在一台机器上同时启动apollo-portal和apollo-configservice的话，需要修改apollo-portal的端口。直接修改startup.sh中的SERVER_PORT即可，如SERVER_PORT=8070。\n切换到目录 /data/apollo/apollo-0.9.1/apollo-portal/target，解压apollo-portal-0.9.1-SNAPSHOT-github.zip")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("unzip apollo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("portal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9.1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SNAPSHOT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后执行")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("cd scripts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nsudo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("iu cloud\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("./startup.sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("验证 :")])]),s._v(" "),a("p",[s._v("防火墙配置规则，添加8070端口")]),s._v(" "),a("ol",[a("li",[s._v("请求地址：http://对外ip地址:8070")]),s._v(" "),a("li",[s._v("输入用户名：apollo，密码：admin")]),s._v(" "),a("li",[s._v("尝试新建appid及发布信息，无问题则部署成功")])]),s._v(" "),a("blockquote",[a("p",[s._v("添加用户")])]),s._v(" "),a("p",[s._v("添加用户：http://apollo地址/user-manage.html")])])}),[],!1,null,null,null);a.default=n.exports}}]);